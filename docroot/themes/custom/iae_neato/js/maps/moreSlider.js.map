{"version":3,"sources":["moreSlider.js"],"names":["$","Drupal","behaviors","moreSlider","attach","context","settings","once","each","finalHeight","$moreWrapper","this","$moreSlider","find","$moreSliderButton","siblings","fadeHeight","height","fullHeight","get","scrollHeight","maxDelay","removeClass","css","show","click","evt","preventDefault","hasClass","html","scrollTop","window","itemTop","offset","top","delay","animate","addClass","hide","maxHeight","duration","easing","jQuery"],"mappings":"CAGC,SAAUA,GACT,YAEAC,QAAOC,UAAUC,YACfC,OAAQ,SAASC,EAASC,GACVN,EAAE,mBAAoBK,EACpCL,GAAE,mBAAoBK,GAASE,KAAK,eAAeC,KAAK,WACtD,GAGIC,GAHAC,EAAeV,EAAEW,MACjBC,EAAcF,EAAaG,KAAK,mBAChCC,EAAoBF,EAAYG,SAAS,0BAEzCC,EAAaJ,EAAYK,SACzBC,EAAaN,EAAYO,IAAI,GAAGC,aAChCC,EAAW,GAGXH,GAAaF,EAAa,IAC5BJ,EAAYU,YAAY,eACxBV,EAAYW,IAAI,YAAaL,EAAa,QAE1CJ,EAAkBU,OAClBZ,EAAYC,KAAK,2BAA2BW,QAI9CV,EAAkBW,MAAM,SAAUC,GAEhC,GADAA,EAAIC,iBACAf,EAAYgB,SAAS,WAAY,CAGnCnB,EAAcO,EAEdJ,EAAYU,YAAY,WAAWT,KAAK,2BAA2BW,KAAK,KAExEV,EAAkBe,KAAK,uBAGvB,IAAIC,GAAY9B,EAAE+B,QAAQD,YACtBE,EAAUpB,EAAYqB,SAASC,IAAMlB,CACzC,IAAIgB,EAAUF,EAAY,EAAG,CAC3B,GAAIK,GAAQjB,EAAaF,CACzBhB,GAAE,cAAcoC,SAAUN,UAAWE,EAAU,MAAQG,EAAQd,EAAYA,EAAWc,EAAO,SAE/FzB,EAAa2B,SAAS,eAItB5B,GAAcG,EAAYO,IAAI,GAAGC,aAEjCR,EAAYyB,SAAS,WAAWxB,KAAK,2BAA2ByB,KAAK,KAErExB,EAAkBe,KAAK,wBACvBnB,EAAa2B,SAAS,UAGxB,IAAIF,GAAQjB,EAAaF,CACzBJ,GAAYwB,SAASG,UAAW9B,IAAe+B,SAAWL,EAAQd,EAAYA,EAAWc,EAAOM,OAAQ,iBAMhHC","file":"../moreSlider.js","sourcesContent":["/**\n * Implement div with max-height which hides content - more button slides down remaining content.\n */\n(function ($) {\n  'use strict';\n\n  Drupal.behaviors.moreSlider = {\n    attach: function(context, settings) {\n      var $slider = $('.az-more-wrapper', context);\n      $('.az-more-wrapper', context).once('azActivated').each(function() {\n        var $moreWrapper = $(this);\n        var $moreSlider = $moreWrapper.find('.az-more-slider');\n        var $moreSliderButton = $moreSlider.siblings('.az-more-slider-button');\n        var finalHeight;\n        var fadeHeight = $moreSlider.height();\n        var fullHeight = $moreSlider.get(0).scrollHeight;\n        var maxDelay = 1000;   // Maximum time to open/close slider\n\n        // Content is smaller than space and doesn't need hiding, hide overlay, hide more button\n        if (fullHeight < fadeHeight + 40) {\n          $moreSlider.removeClass('az-fade-out');\n          $moreSlider.css('maxHeight', fullHeight + 'px');\n        } else {\n          $moreSliderButton.show();\n          $moreSlider.find('.az-more-slider-overlay').show();\n        }\n\n        // User clicks 'more/less' link\n        $moreSliderButton.click(function (evt) {\n          evt.preventDefault();\n          if ($moreSlider.hasClass('az-open')) {\n            // Close the slider\n\n            finalHeight = fadeHeight;\n            // Show fade overlay\n            $moreSlider.removeClass('az-open').find('.az-more-slider-overlay').show(100);\n            // Change the more/less link label\n            $moreSliderButton.html('&mdash; more &mdash;');\n\n            // If the top of moreSlider is above the screen scroll screen down to put top of item at top of screen\n            var scrollTop = $(window).scrollTop();\n            var itemTop = $moreSlider.offset().top - fadeHeight;\n            if (itemTop - scrollTop < 0) {\n              var delay = fullHeight - fadeHeight;\n              $('html, body').animate({ scrollTop: itemTop + 'px'}, (delay > maxDelay) ? maxDelay : delay, 'swing');\n            }\n            $moreWrapper.addClass('az-open');\n          } else {\n            // Open the slider\n\n            finalHeight = $moreSlider.get(0).scrollHeight;\n            // Hide fade overlay\n            $moreSlider.addClass('az-open').find('.az-more-slider-overlay').hide(100);\n            // Change the more/less link label\n            $moreSliderButton.html('&mdash; less &mdash;');\n            $moreWrapper.addClass('az-open');\n          }\n\n          var delay = fullHeight - fadeHeight;\n          $moreSlider.animate({maxHeight: finalHeight}, {duration: (delay > maxDelay) ? maxDelay : delay, easing: 'swing'});\n        });\n      });\n    }\n  };\n\n}(jQuery));\n\n"]}